include:
  - local: 'ci/cpu/clang12_release.yml'
  - local: 'ci/cpu/gcc11_debug.yml'
  - local: 'ci/cpu/gcc11_release.yml'
  - local: 'ci/cpu/gcc11_release_stdexec.yml'
  - local: 'ci/cpu/gcc11_debug_stdexec.yml'
  - local: 'ci/cpu/gcc12_release_cxx20.yml'
  - local: 'ci/cpu/clang13_release_cxx20.yml'
  - local: 'ci/cuda/gcc11_release.yml'
  - local: 'ci/cuda/gcc11_release_scalapack.yml'
  - local: 'ci/cuda/gcc11_codecov.yml'
  - local: 'ci/rocm/clang14+rocm-5.3.3_release.yml'

#--------------------------------------------------------------

#TODO
#fixare "check format" con newLine
#errore nella build_deps di gcc11 codecov
#implementare questo qua sotto (in cuda)

#--------------------------------------------------------------


# TODO codecov -> debug
#cuda codecov build gcc11 scalapack:
#  extends: .build_spack_common
#  variables:
#    BUILD_DOCKER_FILE: ci/docker/build.Dockerfile
#    DEPLOY_DOCKER_FILE: ci/docker/deploy.Dockerfile
#    BASE_IMAGE: docker.io/nvidia/cuda:11.7.1-devel-ubuntu22.04
#    DEPLOY_BASE_IMAGE: docker.io/ubuntu:22.04
#    EXTRA_APTGET: ""
#    EXTRA_APTGET_DEPLOY: "glibc-tools"
#    # glibc-tools is needed for libSegFault on ubuntu:22.04
#    COMPILER: gcc@11.2.0
#    CXXSTD: 17
#    USE_MKL: "OFF"
#    USE_ROCBLAS: "OFF"
#    SPACK_ENVIRONMENT: ci/docker/debug-cuda-scalapack.yaml
#    COMMON_SPACK_ENVIRONMENT: ci/docker/common.yaml
#    BUILD_IMAGE: $CSCS_REGISTRY_PATH/codecov-cuda-gcc11/build
#    DEPLOY_IMAGE: $CSCS_REGISTRY_PATH/codecov-cuda-gcc11/deploy:$CI_COMMIT_SHA
#    SLURM_CONSTRAINT: gpu
#    THREADS_PER_NODE: 24
#    USE_CODECOV: "false"
#

#questa sotto non ha la parte di test nel file .yml, avr√† solo il blocco deps e build

#rocm release build clang14+rocm-5.3.3:
#  extends: .build_spack_common
#  variables:
#    SLURM_CONSTRAINT: mc
#    THREADS_PER_NODE: 64

#--------------------------------------------------------------

##
## RUNS
##
#cuda codecov test gcc11 scalapack:
#  extends: .run_common
#  needs:
#    - cuda codecov build gcc11 scalapack
#  trigger:
#    include:
#      - artifact: pipeline.yml
#        job: cuda codecov build gcc11 scalapack
