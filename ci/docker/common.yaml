#
# Distributed Linear Algebra with Future (DLAF)
#
# Copyright (c) 2018-2024, ETH Zurich
# All rights reserved.
#
# Please, refer to the LICENSE file in the root directory.
# SPDX-License-Identifier: BSD-3-Clause
#

packages:
  all:
    target: [x86_64]
  # Set intel MKL as default blas, lapack and scalapack provider.
  # Can be overwritten in environments if needed.
  blas:
    require: 'intel-oneapi-mkl'
  lapack:
    require: 'intel-oneapi-mkl'
  scalapack:
    require: 'intel-oneapi-mkl'
  mpi:
    require: 'mpich'
  blaspp:
    variants:
      - '~cuda'
      - '~openmp'
      - '~rocm'
  intel-oneapi-mkl:
    require:
      - 'threads=openmp'
  openblas:
    variants:
      - 'threads=openmp'
  mpich:
    # Requirement for ABI compatibility on the test system
    require:
      - '@3.4.2'
    variants:
      - '~fortran'
      - '~libxml2'
  hwloc:
    variants:
      - '~libxml2'
  pika:
    require:
      # pika@0.31.0:
      # - '@git.be0f6e0ff195ccb32e0c67ffd001514cbb90d735=0.31.0'
      # pika@0.31.0 + transform_mpi bloat fix:
      # - '@git.2937bfcbb89b87c854d681338747348e8dcd8d88=0.31.0'
      # above + any_receiver revert:
      - '@git.199eefb19341e49c6e7e541a90e9277202065cd9=0.31.0'
  git:
    # Force git as non-buildable to allow deprecated versions in environments
    # https://github.com/spack/spack/pull/30040
    buildable: false
