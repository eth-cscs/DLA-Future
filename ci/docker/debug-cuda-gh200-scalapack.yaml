#
# Distributed Linear Algebra with Future (DLAF)
#
# Copyright (c) 2018-2024, ETH Zurich
# All rights reserved.
#
# Please, refer to the LICENSE file in the root directory.
# SPDX-License-Identifier: BSD-3-Clause
#

spack:
  include:
  - /spack_environment/common-gh200.yaml

  view: false
  concretizer:
    unify:
      true

  specs:
    # - dla-future@master build_type=Debug +cuda +miniapps +scalapack +ci-test +hdf5 +pch
    # Disable HDF5 as test fails due to filesystem permissions
    - dla-future@master build_type=Debug +cuda +miniapps +scalapack +ci-test +pch

  packages:
    all:
      variants:
        - 'build_type=Release'
    blas:
      require:: 'openblas'
    lapack:
      require:: 'openblas'
    scalapack:
      require:: 'netlib-scalapack'
    mpich:
      require:
        - '+fortran'
    pika:
      require:
        # Use patched 30.1 pika to speed up C_API tests.
        #- '@0.30.0'
        - 'build_type=Debug'
        - 'malloc=system'
