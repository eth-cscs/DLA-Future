<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DLAF: /home/runner/work/DLA-Future/DLA-Future/include/dlaf/communication/broadcast_panel.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">DLAF
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="dir_415b543d06dcd728a2539f6ad76147ea.html">dlaf</a></li><li class="navelem"><a class="el" href="dir_15349bc9b21f8e4d96d874f052ee519c.html">communication</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle"><div class="title">broadcast_panel.h File Reference</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;type_traits&gt;</code><br />
<code>#include &lt;pika/execution.hpp&gt;</code><br />
<code>#include &lt;<a class="el" href="index2d_8h_source.html">dlaf/common/index2d.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="communicator__pipeline_8h_source.html">dlaf/communication/communicator_pipeline.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="communication_2index_8h_source.html">dlaf/communication/index.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="kernels_2broadcast_8h_source.html">dlaf/communication/kernels/broadcast.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="message_8h_source.html">dlaf/communication/message.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="copy__tile_8h_source.html">dlaf/matrix/copy_tile.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="panel_8h_source.html">dlaf/matrix/panel.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="matrix_2tile_8h_source.html">dlaf/matrix/tile.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="types_8h_source.html">dlaf/types.h</a>&gt;</code><br />
<code>#include &lt;<a class="el" href="util__matrix_8h_source.html">dlaf/util_matrix.h</a>&gt;</code><br />
</div>
<p><a href="broadcast__panel_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:ac2d56c6ab2ce5b27a1115e549a41a148" id="r_ac2d56c6ab2ce5b27a1115e549a41a148"><td class="memTemplParams" colspan="2"><a id="ac2d56c6ab2ce5b27a1115e549a41a148" name="ac2d56c6ab2ce5b27a1115e549a41a148"></a>
template&lt;Coord dst_coord&gt; </td></tr>
<tr class="memitem:ac2d56c6ab2ce5b27a1115e549a41a148"><td class="memTemplItemLeft" align="right" valign="top">std::pair&lt; SizeType, <a class="el" href="communication_2index_8h.html#a2b48f62607e5e128dff19ceac22093e9">comm::IndexT_MPI</a> &gt;&#160;</td><td class="memTemplItemRight" valign="bottom"><b>dlaf::comm::internal::transposedOwner</b> (const <a class="el" href="classdlaf_1_1matrix_1_1_distribution.html">matrix::Distribution</a> &amp;dist, const <a class="el" href="classdlaf_1_1common_1_1_index2_d.html">LocalTileIndex</a> idx)</td></tr>
<tr class="separator:ac2d56c6ab2ce5b27a1115e549a41a148"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a5e63a7fa440a442aa538d89b580eb3ed" id="r_a5e63a7fa440a442aa538d89b580eb3ed"><td class="memTemplParams" colspan="2">template&lt;class T , Device D, Coord axis, matrix::StoreTransposed storage, class  = std::enable_if_t&lt;!std::is_const_v&lt;T&gt;&gt;&gt; </td></tr>
<tr class="memitem:a5e63a7fa440a442aa538d89b580eb3ed"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="broadcast__panel_8h.html#a5e63a7fa440a442aa538d89b580eb3ed">dlaf::comm::broadcast</a> (<a class="el" href="communication_2index_8h.html#a2b48f62607e5e128dff19ceac22093e9">comm::IndexT_MPI</a> rank_root, <a class="el" href="structdlaf_1_1matrix_1_1_panel.html">matrix::Panel</a>&lt; axis, T, D, storage &gt; &amp;panel, <a class="el" href="classdlaf_1_1comm_1_1_communicator_pipeline.html">comm::CommunicatorPipeline</a>&lt; coord_to_communicator_type(<a class="el" href="index2d_8h.html#a9b3be798b052f32def2a280a80e2295c">orthogonal</a>(axis))&gt; &amp;serial_comm)</td></tr>
<tr class="separator:a5e63a7fa440a442aa538d89b580eb3ed"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a484f6030ff7c3530de17270451d10681" id="r_a484f6030ff7c3530de17270451d10681"><td class="memTemplParams" colspan="2"><a id="a484f6030ff7c3530de17270451d10681" name="a484f6030ff7c3530de17270451d10681"></a>
template&lt;Coord C&gt; </td></tr>
<tr class="memitem:a484f6030ff7c3530de17270451d10681"><td class="memTemplItemLeft" align="right" valign="top">auto &amp;&#160;</td><td class="memTemplItemRight" valign="bottom"><b>dlaf::comm::internal::get_taskchain</b> (<a class="el" href="classdlaf_1_1comm_1_1_communicator_pipeline.html">comm::CommunicatorPipeline</a>&lt; comm::CommunicatorType::Row &gt; &amp;row_task_chain, <a class="el" href="classdlaf_1_1comm_1_1_communicator_pipeline.html">comm::CommunicatorPipeline</a>&lt; comm::CommunicatorType::Col &gt; &amp;col_task_chain)</td></tr>
<tr class="separator:a484f6030ff7c3530de17270451d10681"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aaf65e45c4589538449b807f37aeb0c96" id="r_aaf65e45c4589538449b807f37aeb0c96"><td class="memTemplParams" colspan="2">template&lt;class T , Device D, Coord axis, matrix::StoreTransposed storage, matrix::StoreTransposed storageT, class  = std::enable_if_t&lt;!std::is_const_v&lt;T&gt;&gt;&gt; </td></tr>
<tr class="memitem:aaf65e45c4589538449b807f37aeb0c96"><td class="memTemplItemLeft" align="right" valign="top">void&#160;</td><td class="memTemplItemRight" valign="bottom"><a class="el" href="broadcast__panel_8h.html#aaf65e45c4589538449b807f37aeb0c96">dlaf::comm::broadcast</a> (<a class="el" href="communication_2index_8h.html#a2b48f62607e5e128dff19ceac22093e9">comm::IndexT_MPI</a> rank_root, <a class="el" href="structdlaf_1_1matrix_1_1_panel.html">matrix::Panel</a>&lt; axis, T, D, storage &gt; &amp;panel, <a class="el" href="structdlaf_1_1matrix_1_1_panel.html">matrix::Panel</a>&lt; <a class="el" href="index2d_8h.html#a9b3be798b052f32def2a280a80e2295c">orthogonal</a>(axis), T, D, storageT &gt; &amp;panelT, <a class="el" href="classdlaf_1_1comm_1_1_communicator_pipeline.html">comm::CommunicatorPipeline</a>&lt; comm::CommunicatorType::Row &gt; &amp;row_task_chain, <a class="el" href="classdlaf_1_1comm_1_1_communicator_pipeline.html">comm::CommunicatorPipeline</a>&lt; comm::CommunicatorType::Col &gt; &amp;col_task_chain)</td></tr>
<tr class="separator:aaf65e45c4589538449b807f37aeb0c96"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a id="a5e63a7fa440a442aa538d89b580eb3ed" name="a5e63a7fa440a442aa538d89b580eb3ed"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a5e63a7fa440a442aa538d89b580eb3ed">&#9670;&#160;</a></span>broadcast() <span class="overload">[1/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T , Device D, Coord axis, matrix::StoreTransposed storage, class  = std::enable_if_t&lt;!std::is_const_v&lt;T&gt;&gt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void dlaf::comm::broadcast </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="communication_2index_8h.html#a2b48f62607e5e128dff19ceac22093e9">comm::IndexT_MPI</a>&#160;</td>
          <td class="paramname"><em>rank_root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdlaf_1_1matrix_1_1_panel.html">matrix::Panel</a>&lt; axis, T, D, storage &gt; &amp;&#160;</td>
          <td class="paramname"><em>panel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classdlaf_1_1comm_1_1_communicator_pipeline.html">comm::CommunicatorPipeline</a>&lt; coord_to_communicator_type(<a class="el" href="index2d_8h.html#a9b3be798b052f32def2a280a80e2295c">orthogonal</a>(axis))&gt; &amp;&#160;</td>
          <td class="paramname"><em>serial_comm</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Broadcast</p>
<p>Given a source panel on a rank, it gets broadcasted to make it available to all other ranks.</p>
<p>It does not give access to all the tiles, but just the ones of interest for each rank.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rank_root</td><td>on which rank the <code>panel</code> contains data to be broadcasted </td></tr>
    <tr><td class="paramname">panel</td><td>on <code>rank_root</code> it is the source panel on other ranks it is the destination panel </td></tr>
    <tr><td class="paramname">serial_comm</td><td>where to pipeline the tasks for communications. </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>Communicator in <code>serial_comm</code> must be orthogonal to panel axis </dd></dl>

</div>
</div>
<a id="aaf65e45c4589538449b807f37aeb0c96" name="aaf65e45c4589538449b807f37aeb0c96"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aaf65e45c4589538449b807f37aeb0c96">&#9670;&#160;</a></span>broadcast() <span class="overload">[2/2]</span></h2>

<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T , Device D, Coord axis, matrix::StoreTransposed storage, matrix::StoreTransposed storageT, class  = std::enable_if_t&lt;!std::is_const_v&lt;T&gt;&gt;&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">void dlaf::comm::broadcast </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="communication_2index_8h.html#a2b48f62607e5e128dff19ceac22093e9">comm::IndexT_MPI</a>&#160;</td>
          <td class="paramname"><em>rank_root</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdlaf_1_1matrix_1_1_panel.html">matrix::Panel</a>&lt; axis, T, D, storage &gt; &amp;&#160;</td>
          <td class="paramname"><em>panel</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structdlaf_1_1matrix_1_1_panel.html">matrix::Panel</a>&lt; <a class="el" href="index2d_8h.html#a9b3be798b052f32def2a280a80e2295c">orthogonal</a>(axis), T, D, storageT &gt; &amp;&#160;</td>
          <td class="paramname"><em>panelT</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classdlaf_1_1comm_1_1_communicator_pipeline.html">comm::CommunicatorPipeline</a>&lt; comm::CommunicatorType::Row &gt; &amp;&#160;</td>
          <td class="paramname"><em>row_task_chain</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="classdlaf_1_1comm_1_1_communicator_pipeline.html">comm::CommunicatorPipeline</a>&lt; comm::CommunicatorType::Col &gt; &amp;&#160;</td>
          <td class="paramname"><em>col_task_chain</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Broadcast</p>
<p>Given a source panel on a rank, this communication pattern makes every rank access tiles of both: a. the source panel b. it's tranposed variant (just tile coordinates, data is not transposed) w.r.t. the main diagonal of the parent matrix In particular, it does not give access to all the tiles, but just the ones of interest for each rank, i.e. the rows and columns of a distributed matrix that the ranks stores locally.</p>
<p>This is achieved by either:</p><ul>
<li>linking as external tile, if the tile is already available locally for the rank</li>
<li>receiving the tile from the owning rank (via a broadcast)</li>
</ul>
<p>Be aware that the last tile will just be available on <code>panel</code>, but it won't be transposed to <code>panelT</code>.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">rank_root</td><td>specifies on which rank the <code>panel</code> is the source of the data </td></tr>
    <tr><td class="paramname">panel</td><td>on rank_root it is the source panel (a) on others it represents the destination for the broadcast (b) </td></tr>
    <tr><td class="paramname">panelT</td><td>it represents the destination panel for the "transposed" variant of the panel </td></tr>
    <tr><td class="paramname">row_task_chain</td><td>where to pipeline the tasks for row-wise communications </td></tr>
    <tr><td class="paramname">col_task_chain</td><td>where to pipeline the tasks for col-wise communications </td></tr>
    <tr><td class="paramname">grid_size</td><td>shape of the grid of row and col communicators from <code>row_task_chain</code> and <code>col_task_chain</code> </td></tr>
  </table>
  </dd>
</dl>
<dl class="section pre"><dt>Precondition</dt><dd>both panels are child of a matrix (even not the same) with the same Distribution </dd>
<dd>
both panels parent matrices should be square matrices with square blocksizes </dd>
<dd>
both panels offsets should lay on the main diagonal of the parent matrix </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.8
</small></address>
</body>
</html>
