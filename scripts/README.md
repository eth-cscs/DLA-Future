# Job generation workflow

- `gen.py` : a python script generating a set of sbatch scripts containing commands for DLA-F/Slate/DPLASMA versions of Cholesky and TRSM.
- `miniapps.py` : a small python library providing command generation functions used by `gen.py`

Usually `miniapps.py` is not modified. Instead, `gen.py` is adjusted to generate the exact set of algorithms (Cholesky/TRSM) and libraries (DLA-F/Slate/DPLASMA).

`gen.py` generates a tree of sbatch scripts (and submits them) as follows:

```
<run_dir>
├── 16
│   ├── job.sh
├── 32
│   ├── job.sh
├── 64
│   ├── job.sh
└── 8
    ├── job.sh
```

Each `job.sh` script is stored under the corresponding number of nodes and produces a number of files, for example:

```
├── job.sh                  # the job file
├── chol_dlaf.out           # output file for blocking MPI version of cholesky
├── chol_dlaf_nb_011.out    # output file for non-blocking MPI version of cholesky using the default queue (0) with polling (1) and dedicated MPI core (1).
├── chol_dlaf_nb_101.out    # output file for non-blocking MPI version of cholesky using the shared-priority queue (1) with yielding (0) and dedicated MPI core (1).
├── ...
├── trsm_slate.out          # output file for TRSM with Slate
├── env.txt                 # printout of the environment of the job at the time of execution (for debugging)
├── modules.txt             # a list of modules loaded at the time of execution of the job script
├── error.txt               # any errors
└── output.txt              # output file -- empty in most cases as output is redirected to separate files for easier post-processing
```

# Postprocessing workflow

- `plots.py` : generates time and performance plots
- `postprocess.py` : library providing plotting and analysis functions for DLA-F/SLATE/DPLASMA implementations of Cholesky and TRSM.

Usually `postporcess.py` is not modified. Instead `plots.py` is adjusted to generate plots and do data analysis.

Note that `pasre_jobs()` from `postprocess.py` parses data in the form generated by `gen.py`:

```
# <data_dir>
# |
# ├── 16 # nodes
# │   ├── job.sh
# │   ├── <bench_name_1>.out
# │   ├── <bench_name_2>.out
# |   ...
# ├── 32
# │   ├── job.sh
# │   ├── <bench_name_1>.out
# │   ├── <bench_name_2>.out
# |   ...
```
